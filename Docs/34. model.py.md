### DB 모델 작성하기: 테이블 설계도 그리기

ORM을 사용하면, 데이터베이스에 만들 테이블의 구조를 파이썬 **클래스(Class)**로 정의할 수 있습니다. 이 클래스가 바로 '테이블 설계도' 역할을 합니다.

우리는 이 설계도를 이전에 만들어둔 `app/models.py` 파일에 그릴 겁니다.

```
# app/models.py

from tortoise import fields, models

class User(models.Model):
    """사용자 모델"""
    id = fields.IntField(pk=True)
    username = fields.CharField(max_length=20, unique=True)
    email = fields.CharField(max_length=200, unique=True)
    hashed_password = fields.CharField(max_length=100)
    created_at = fields.DatetimeField(auto_now_add=True)
    
    def __str__(self):
        return self.username
```

- **`from tortoise import fields, models`**: Tortoise ORM에서 모델과 필드를 정의하는 데 필요한 도구들을 가져옵니다.
    
- **`class User(models.Model):`**: `User`라는 이름의 테이블 설계도를 만듭니다. `models.Model`을 상속받아야 Tortoise가 데이터베이스 모델로 인식합니다.
    
- **`id = fields.IntField(pk=True)`**:
    
    - `IntField`: 정수(Integer) 타입의 열입니다.
        
    - `pk=True`: **P**rimary **K**ey. 이 열이 각 행을 식별하는 고유한 기본 키임을 나타냅니다. 데이터가 추가될 때마다 자동으로 1씩 증가하는 번호가 부여됩니다.
        
- **`username = fields.CharField(max_length=20, unique=True)`**:
    
    - `CharField`: 문자열(Character) 타입의 열입니다.
        
    - `max_length=20`: 최대 20글자까지 저장할 수 있습니다.
        
    - `unique=True`: 이 열의 값은 전체 테이블에서 중복될 수 없습니다. (같은 `username`으로 두 번 가입 불가)
        
- **`created_at = fields.DatetimeField(auto_now_add=True)`**:
    
    - `DatetimeField`: 날짜와 시간 정보를 담는 열입니다.
        
    - `auto_now_add=True`: 데이터가 처음 생성될 때의 시간이 자동으로 기록됩니다.


## varchar vs. CharField 

`CharField`는 **ORM(객체 관계 매핑)**의 '언어'이고, `VARCHAR`는 **데이터베이스(SQL)**의 '언어'이기 때문입니다.

ORM은 특정 데이터베이스에 종속되지 않는 범용적인 '번역가' 역할을 합니다. 그래서 데이터베이스마다 조금씩 다른 SQL 데이터 타입 이름(`VARCHAR`, `NVARCHAR`, `TEXT` 등) 대신, `CharField`라는 통일된 이름을 사용하는 것입니다.

**`CharField`는 ORM이 제공하는 추상화된 필드 타입**이며, `Tortoise-ORM`이 이 `CharField`를 보고 MySQL에 맞는 `VARCHAR` 타입으로 알아서 번역해 주는 것입니다.

