
하나의 API 요청으로 **여러 개의 `Item`을 한 번에 생성**하고 싶을 수도 있습니다. 이럴 때는 API 엔드포인트의 함수에서 매개변수의 타입을 `list[Item]`으로 지정하기만 하면 됩니다.

```

from fastapi import FastAPI
from pydantic import BaseModel, Field

app = FastAPI()

# 1. 서브 모델(Sub-model) 정의
class Image(BaseModel):
    url: str = Field(..., example="http://example.com/image.jpg")
    name: str = Field(..., example="멋진 상품 이미지")


# 2. 메인 모델(Item)에 서브 모델과 리스트를 타입으로 사용
class Item(BaseModel):
    name: str = Field(..., example="게이밍 마우스")
    description: str | None = Field(default=None, example="이 마우스는 놀라운 성능을 자랑합니다.")
    price: float = Field(..., gt=0, example=59.99)
    tax: float | None = Field(default=None, ge=0, example=0.1)
    
    # list[str] 타입을 사용하여 문자열의 배열을 받음
    tags: list[str] = Field(default=[], example=["전자제품", "게이밍", "PC 주변기기"])
    
    # Image 모델을 타입으로 사용하여 JSON 객체를 받음
    image: Image | None = Field(default=None)


@app.post("/items/")
def create_item(item: Item):
    return item
    
@app.post("/items/bulk/")
def create_bulk_items(items: list[Item]):
	return{"message": f"{len(items)} items created.", "data": items}
```



- `def create_bulk_items(items: list[Item]):`: 함수의 매개변수 `items`가 `Item` 모델의 리스트라고 선언했습니다.
    
- 이제 FastAPI는 이 `/items/bulk/` 엔드포인트로 **`Item` 객체들로 이루어진 JSON 배열**을 기대합니다.


| 요청 주소 (URL Endpoint) | 클라이언트가 보내야 하는 데이터 구조 | 서버에서 실행되는 함수 |
| :--- | :--- | :--- |
| `POST /items/` | 단일 JSON 객체 `{ ... }` | `create_item(item: Item)` |
| `POST /items/bulk/` | JSON 객체의 배열 `[ { ... } ]` | `create_bulk_items(items: list[Item])` |
