

## Docker 환경 구축 5단계 요약 (완성판)

### 1단계: 실제 내용물 만들기 (애플리케이션 코드)

- **해당 파일**: `app/main.py`, `app/config.py`, `app/models.py` 등 `app` 폴더 안의 모든 것
    
- **역할**: 우리가 실제로 만들고 있는 **애플리케이션 그 자체**입니다. 택배 상자 안에 들어갈 '책, 옷, 전자제품' 같은 **실제 내용물**에 해당합니다.
    

---

### 2단계: 전체 계획 세우기 (Master Plan)

- **사용한 파일**: `docker-compose.yml`
    
- **역할**: 프로젝트의 **전체 구조를 설계하는 마스터 플랜**입니다. "우리 프로젝트에는 '앱' 컨테이너와 'DB' 컨테이너가 필요해." 라고 정의합니다.
    

---

### 3단계: '앱' 포장 상자 설계도 (App's Blueprint)

- **사용한 파일**: `Dockerfile`
    
- **역할**: 1단계에서 만든 '내용물'을 담을 **'앱' 컨테이너라는 포장 상자를 어떻게 만들지**에 대한 상세한 시공 설계도입니다.
    

---

### 4단계: '앱'에 필요한 부속품 목록 (Dependencies List)

- **사용한 파일**: `requirements.txt`
    
- **역할**: 3단계에서 포장 상자를 만들 때, 내용물과 함께 넣어야 할 **'부속품(라이브러리)' 목록**입니다.
    

---

### 5단계: '앱'이 사용할 비밀 정보 (Secrets)

- **사용한 파일**: `.env`
    
- **역할**: 'DB' 컨테이너에 접속하기 위한 **비밀번호** 등 민감한 정보를 보관하는 **비밀 금고**입니다.


## 정리 

| 파일 / 폴더                  | 핵심 내용 (What's Inside)                                                                                                    | 역할 (Why it's Needed)                                              |
| :----------------------- | :----------------------------------------------------------------------------------------------------------------------- | :---------------------------------------------------------------- |
| **`app/` 폴더**            | `main.py`, `config.py`, `models.py` 등                                                                                    | **애플리케이션 소스 코드**<br>실제 FastAPI 로직이 작성되는 곳                         |
| `app/main.py`            | `app = FastAPI(lifespan=...)`<br>`@app.get("/")`<br>`Tortoise.init(...)`                                                 | **프로그램의 시작점.**<br>FastAPI 앱을 생성하고, DB를 연결하고, API 경로를 정의.          |
| **`docker-compose.yml`** | `services:`<br>  `db:`<br>    `image: mysql:8.0`<br>  `app:`<br>    `build: .`<br>    `depends_on: [db]`                 | **총괄 설계도 (Master Plan)**<br>'DB'와 '앱' 컨테이너를 어떻게 함께 실행할지 정의.       |
| **`Dockerfile`**         | `FROM python:3.13`<br>`COPY requirements.txt .`<br>`RUN pip install ...`<br>`COPY ./app ./app`<br>`CMD ["uvicorn", ...]` | **'앱' 컨테이너 시공 설계도**<br>파이썬 설치, 라이브러리 설치, 코드 복사 등 앱 컨테이너를 만드는 순서.  |
| **`requirements.txt`**   | `fastapi`<br>`uvicorn`<br>`tortoise-orm`<br>`asyncmy`<br>...                                                             | **라이브러리 목록**<br>`Dockerfile`이 `pip`으로 설치해야 할 파이썬 라이브러리들의 정확한 리스트. |
| **`.env`**               | `DATABASE_URL="mysql://user:password@db..."`<br>`SECRET_KEY="..."`                                                       | **비밀 금고**<br>DB 비밀번호처럼 민감하거나, 환경마다 달라지는 설정값을 코드와 분리.              |